---
hide:
    - toc
---

# **MT** 06

>## **NETWORKING** 
*TECNOLOG√çA Y FABRICACI√ìN*

![](../images/MT01/.png) 
![](../images/MT01/.png) 
![](../images/MT01/.png) 
![](../images/MT01/.png) 
![](../images/MT01/.png) 

_____

Este _*M√≥dulo T√©cnico*_ 06 nos introdujo al Networking y Comunicaciones para Fabricaci√≥n Digital, con el objetivo de comprender principalmente:  **qu√© son las comunicaciones, para qu√© sirven y c√≥mo funcionan** a nivel conceptual-te√≥rico, a trav√©s de ejemplos t√©cnico-pr√°cticos sencillos y analog√≠as cotidianas.

‚ùù _En el mundo de la tecnolog√≠a y la fabricaci√≥n digital,_ **_la habilidad de que diferentes dispositivos se "hablen" entre s√≠_** _es fundamental. Esto es lo que llamamos comunicaci√≥n o_ _**networking**._ ‚ùû  [ _+ info ~ [Introducci√≥n a Networking ]_]([https://drive.google.com/file/d/1GAydsQ3LZKZzK2P6FtbNLVRa-y8HHwwn/view?usp=share_link)

## **HERRAMIENTAS PR√ÅCTICAS APLICADAS** . MT06

## NETWORKING DEVICES ~ *LATU*

La pr√°ctica presencial const√≥ de una breve sesi√≥n en las instalaciones del LATU, a trav√©s de una din√°mica de intercambio entre estudiantes y equipo docente a cargo de Math√≠as Rodr√≠guez. 
Bajo el objetivo de consigna **_'Comunicaci√≥n entre dispositivos' (Networking Devices)_** desarrollamos 
[ 3 consignas te√≥rico-pr√°cticas,](https://docs.google.com/presentation/d/1mC3iBvWMkmjyKwrU4qxjnVaWNS6LDlBpFUY7jH2f0k0/edit?usp=sharing) con distintos desaf√≠os circuitales e instrucciones para la 'movilidad energ√©tica' y transferencia de datos electr√≥nicos. 
[ _+ info ~ [ Pr√°ctica Network_ESP32 Arduino ~ LATU ]_ ](https://docs.google.com/presentation/d/1mC3iBvWMkmjyKwrU4qxjnVaWNS6LDlBpFUY7jH2f0k0/edit?usp=sharing)

En el EDITOR Arduino IDE software: Incluimos el microcontrolador ESP32, el "cerebro" ya programando es mucho m√°s potente, r√°pido y capaz del Arduino Uno tradicional, (el chip ESP32 contiene 2 n√∫cleos f√≠sicos (Dual-Core), la memoria y las radios de Wi-Fi/Bluetooth) en estos pasos gu√≠a: 
 
```1) Ir a ‚ÄúPreferences‚Äù (men√∫: Arduino IDE (o File) ‚Üí Preferences/settings) > Agregar el link del ESP32 (men√∫: Additional Boards Manager URLs) > Pegar estos link:``` 

- https://dl.espressif.com/dl/package_esp32_index.json

- https://resource.heltec.cn/download/package_heltec_esp32_index.json
https://resource.heltec.cn/download/package_heltec_esp32_index.json

‚ùù _Estos enlaces sirven para que el Arduino IDE pueda reconocer, descargar e instalar las herramientas necesarias (el "core" o n√∫cleo) para programar placas basadas en el chip ESP32. Sin estos links, el IDE solo sabe trabajar con placas oficiales de Arduino (como el Uno o Nano)._ ‚ùû

![](../images/MT06/MT6_esp32_1y2.png
)
![](../images/MT01/.png) 

```2) Abrir Boards Manager > Ir a: Tools ‚Üí Board ‚Üí Boards Manager```

![](../images/MT06/MT6_esp32_rutaDevice.png)
![](../images/MT01/.png) 

__
#### DIN√ÅMICA 1 . Arduino ESP32 ~ Serial UART . *sketch 1*
![](../images/MT01/.png) 
**OBJETIVO**
_Implementar una comunicaci√≥n **Serial UART entre dos ESP32**:_
- _ESP32 A - EMISOR (UART) : cuando el usuario aprieta un bot√≥n, env√≠a un mensaje por UART._
- _ESP32 B RECEPTOR (UART) : recibe el mensaje por UART y prende/apaga un LED seg√∫n el comando recibido._

**CONEXIONES . #1**

![](../images/MT06/MT6_E1_esp32A_emisor.png)

![](../images/MT06/MT6_E1_esp32B_receptor.png)

Armamos el **circuito ESP32 #1** vinculando el microcontrolador ESP32 en conexi√≥n USB con la PC/Software al 
[ EDITOR Arduino IDE + MonitorSerialTool ]([https://](https://docs.arduino.cc/software/ide-v2/tutorials/ide-v2-serial-monitor/))(integrado). Este circuito se compuso de un EMISOR y un RECEPTOR para la transmisi√≥n de datos en comunicaci√≥n combinada y sincr√≥nica entre 2 computadoras:  


```Dispositivo A (Irene-compa) = EMISOR (boca)  ‚Üí```     
```Dispositivo B (Andre-yo) = RECEPTOR (o√≠do)```
[ + info ~ _[ Introducci√≥n a Networking ~ p√°g 1-2 ]_]([https://](https://drive.google.com/file/d/1GAydsQ3LZKZzK2P6FtbNLVRa-y8HHwwn/view?usp=share_link))


![](../images/MT06/MT6_E1_esp32_A+B_LATU.gif)
[üé¨ _LINK DEMO ~ CIRCUITO ESP32 1_LATU_MT06_ ](https://drive.google.com/file/d/1ZnSnKseEqlPLL6TSI0uTwzEuMqSi9MOy/view?usp=share_link)


```Emisor: https://pastebin.com/1ue5XRCQ```
```Receptor: https://pastebin.com/3FQbShiS```

Configuramos [(Serial Monitor)](https://docs.arduino.cc/software/ide-v2/tutorials/ide-v2-serial-monitor/) su c√≥digo de programaci√≥n en correspondencia con las conexiones f√≠sicas establecidas. Si ambos, [circuito f√≠sico + c√≥digo programaci√≥n digital] se corresponden, el circuito se activa encendi√©ndose, de lo contrario, no. Una vez sincronizados y funcionales, ```[Verify Code ‚Äú‚úì‚Äù + Compiling Code "‚Üí"] + Upload sketch, finalmente guardamos el archivo de c√≥digo programado.```

![](../images/MT06/MT6_E1_emi-receptor_code.png)
![](../images/MT01/.png) 
__

#### DIN√ÅMICA 2 . Arduino ESP32 ~ WiFi + HTTP GET . *sketch 2*
![](../images/MT01/.png) 
**OBJETIVO**

_**Programar un microcontrolador ESP32** para que:_
- _Se conecte a una red WiFi._
- _Haga una petici√≥n HTTP GET a una p√°gina web simple._
- _Muestre en el Serial Monitor: Si se conect√≥ correctamente + La IP asignada + El c√≥digo HTTP de respuesta + Los primeros caracteres del contenido recibido_

**CONEXIONES . #2**

Armamos el circuito ESP32 #2 vinculando el microcontrolador ESP32 en conexi√≥n USB con la PC/Software al [EDITOR Arduino IDE + MonitorSerialTool](https://https://docs.arduino.cc/software/ide-v2/tutorials/ide-v2-serial-monitor/) (integrado).

![](../images/MT06/MT6_E1_esp32B_receptor.)


**C√ìDIGO . #2**

```Soluci√≥n: https://wokwi.com/projects/455582534712036353```

Configuramos [(Serial Monitor)](https://docs.arduino.cc/software/ide-v2/tutorials/ide-v2-serial-monitor/) su c√≥digo de programaci√≥n en correspondencia con las conexiones f√≠sicas establecidas. Si ambos, [circuito f√≠sico + c√≥digo programaci√≥n digital] se corresponden, el circuito se activa encendi√©ndose, de lo contrario, no. Una vez sincronizados y funcionales, ```[Verify Code ‚Äú‚úì‚Äù + Compiling Code "‚Üí"] + Upload sketch, finalmente guardamos el archivo de c√≥digo programado.```


![](../images/MT06/MT6_E2_upload-compiling_WIFI.png)
![](../images/MT01/.png) 

#### DIN√ÅMICA 3 . Arduino ESP32 ~ WiFi + DHT22 + MQTT . *sketch 3*

**OBJETIVO**

_Programar un ESP32 para que:_
- _Se conecte a una red WiFi_
- _Se conecte a un broker MQTT p√∫blico_
- _Lea temperatura y humedad desde un sensor DHT22_
- _Publique peri√≥dicamente (configurable) un mensaje JSON en un topic con formato:_ ```mat_utec/<pais>/<zona> + Ejemplo: mat_utec/uy/atlantida```

**CONEXIONES . #3**

>```SENSOR DHT22 (temp/hum) ‚Üí Esp32 :``` 
```(DHT) pin 2 VCC ‚Üí 3V3 (esp32) +``` 
```(DHT) pin 3 DAT ‚Üí pin12 (esp32) +```  
```(DHT) pin 1 GND ‚Üí GND (esp32)``` 

* VCC/IN (Voltage Common Collector) conexi√≥n: al **pin de alimentaci√≥n energ√≠a positiva (+)**.
Este sensor suele funcionar en un rango de 3.3V a 5.5V. En proyectos con ESP32, se recomienda conectarlo al pin de 3.3V, mientras que en Arduino suele ir al de 5V.

* DAT/OUT (Datos) conexi√≥n: al **pin digital (ej:D12)**.
Utiliza un protocolo de comunicaci√≥n de un solo hilo (1-Wire) para enviar los valores de temperatura y humedad al microcontrolador.

* GND conexi√≥n: al **pin negativo o tierra (-)**. 

Armamos el **circuito ESP32 #2** y lo vinculamos en conexi√≥n USB con la PC/Software al [EDITOR Arduino IDE + MonitorSerialTool](https://https://docs.arduino.cc/software/ide-v2/tutorials/ide-v2-serial-monitor/) (integrado), configuramos all√≠ su c√≥digo de programaci√≥n en correspondencia con las conexiones f√≠sicas establecidas. Si ambos, [circuito f√≠sico + c√≥digo programaci√≥n digital] se corresponden, el circuito se activa encendi√©ndose, de lo contrario, no. Una vez sincronizados y funcionales,```[Verify Code ‚Äú‚úì‚Äù + Compiling Code "‚Üí"] + Upload sketch, finalmente guardamos el archivo de c√≥digo programado.```

**C√ìDIGO . #3**

```Soluci√≥n: https://wokwi.com/projects/455570934245246977```

![](../images/MT06/MT6_E3_esp32_wokwi_code.png)

Luego de ingresar/vincular en el codeline el dato de red wifi al microcontrolador: 
>```// WiFi (Wokwi)```
```const char* ssid = "TUREDWIFI";```
```const char* password = "TUPW"```

Indicamos/cambiamos en el codeline los datos geogr√°ficos a georeferenciar, 
para la lectura sensorial de las variables temperatura y humedad:
>```// Defin√≠ tu ubicaci√≥n```
```const char* PAIS = "uy";```
```const char* ZONA = "Maldonado/barra"; // ciudad/zona```

![](../images/MT06/MT6_E3_esp32_sensorHUMTEMP_arduino-runaction2_LATU.png)

Una vez efectivizada en _ArduinoMonitorSerial_ la conexi√≥n remota remota entre el EPS32 y el WIFI, se env√≠a el _mensaje de dato JSON_, public√°ndose sincr√≥nicamente en la interfase visual/pantalla (o peri√≥dicamente, seg√∫n se configure).

![](../images/MT06/MT6_E3_esp32_sensor_wifi&arduino-runaction_LATU.gif)

[üé¨ LINK DEMO ~ ESP32 3_ARDUINORUN ACTION - SENSORHUM_LATU_MT06](https://drive.google.com/file/d/1m4OxKNEYOo3fmS0jOPOst37lyH9-p7zr/view?usp=share_link)
[üé¨ LINK DEMO ~ ESP32 3_SENSORHUM_LATU_MT06](https://drive.google.com/file/d/1GHLS7MPzq7fhE-GlnlWkURz2j_WocznZ/view?usp=share_link)

![](../images/MT01/.png) 

En el [EDITOR Arduino IDE + MonitorSerialTool](https://docs.arduino.cc/software/ide-v2/tutorials/ide-v2-serial-monitor/) (integrado) software: 

Incluimos  ```#include <WiFi.h>```, (indicadas al inicio del c√≥digo) para importar la biblioteca oficial de conectividad Wi-Fi al software de Arduino IDE. Esta l√≠nea de c√≥digo, **habilita la conexi√≥n inal√°mbrica** permite que la placa (como un ESP32, ESP8266 o un Arduino UNO R4 WiFi) se conecte a redes locales y a internet, y **brinda funciones de red** (dando acceso a comandos sencillos para realizar tareas complejas).

Incluimos la [_Installing Libraries:_](https://docs.arduino.cc/software/ide-v1/tutorials/installing-libraries/) 
>```(#include <Nombre.h):``` 
```#include <PubSubClient.h>  +```
```#include <DHTesp.h>```, 

Indicadas al inicio del c√≥digo relevado de internet, (si el programa nos da un error de compilaci√≥n (letras rojas) diciendo _"No such file or directory"_, significa que esa biblioteca no est√° instalada en mi computadora). ```men√∫: [LIBRARY MANAGER ‚Üí PubSubClient + DHTesp```
 
La instalaci√≥n de este **_Library plugin_** son 'paquetes de herramientas' externos al Arduino IDE (que no vienen incluido por defecto), y su utilidad permite **ahorrar tiempo** (evitando tener que escribir lineas de c√≥digo desde cero), **simplificar** (en lugar de programar la comunicaci√≥n bit por bit, solo usamos comandos sencillos como lectura.getTemperature), **compatibilidad** nos aseguramos que nuestra placa (ESP32, Arduino Nano, etc.) sepa interpretar correctamente los datos del hardware externo.

![](../images/MT06/MT6_E3_library.png)
![](../images/MT01.png)
![](../images/MT01.png)

____


## **LINKS DE INTER√âS** . MT06

WOKWI
https://wokwi.com/projects/454858670976591873

WIKI_EN - DFRobot
https://lora-alliance.org/about-lorawan/
‚Äã‚Äãhttps://www.dfrobot.com/product-1121.html

LoRaWAN
https://lora-alliance.org/about-lorawan/

LoRaWAN in 60 minutes
https://youtu.be/ZsVhYiX4_6o?si=kPHcQl4yef0c_AHi


SERIAL vs PARALLEL
https://youtu.be/-iDaeZt-pYM?si=DnIKb6wxrOdOPLt2

ESP32 
https://youtu.be/X4movA5xtBU?si=yCFi-8Lkn0yUPTqu

ARDUINO IDE ~ ALL DOCS
https://docs.arduino.cc/

ARDUINO IDE (DOCS) ~ INSTALLING BOARD PACKAGE
https://docs.arduino.cc/software/ide-v2/tutorials/ide-v2-board-manager/

ARDUINO IDE (DOCS)  ~ INSTALLING LIBRARIES
https://docs.arduino.cc/software/ide-v1/tutorials/installing-libraries/

ARDUINO IDE (DOCS) ~ LANGUAGE REF
https://docs.arduino.cc/language-reference/
